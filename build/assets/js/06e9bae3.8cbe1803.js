"use strict";(self.webpackChunkseata_website=self.webpackChunkseata_website||[]).push([[27900],{55528:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var n=i(74848),s=i(28453);const o={title:"Test coverage guide",keywords:["Seata","coverage"],description:"Test coverage guide."},r="Test coverage guide",c={id:"developers/contributor-guide/test-coverage-guide_dev",title:"Test coverage guide",description:"Test coverage guide.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-v1.2/developers/contributor-guide/test-coverage-guide_dev.md",sourceDirName:"developers/contributor-guide",slug:"/developers/contributor-guide/test-coverage-guide_dev",permalink:"/seata.github.io/docs/v1.2/developers/contributor-guide/test-coverage-guide_dev",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/en/docusaurus-plugin-content-docs/version-v1.2/developers/contributor-guide/test-coverage-guide_dev.md",tags:[],version:"v1.2",frontMatter:{title:"Test coverage guide",keywords:["Seata","coverage"],description:"Test coverage guide."},sidebar:"developers",previous:{title:"New contributor guide",permalink:"/seata.github.io/docs/v1.2/developers/contributor-guide/new-contributor-guide_dev"},next:{title:"New contributor guide",permalink:"/seata.github.io/docs/v1.2/developers/contributor-guide/reporting-security-issues_dev"}},a={},d=[{value:"How to divide test granularity",id:"how-to-divide-test-granularity",level:2},{value:"Unit Test",id:"unit-test",level:2},{value:"1.The benefits of unit testing",id:"1the-benefits-of-unit-testing",level:3},{value:"2.Some design principle of unit test case",id:"2some-design-principle-of-unit-test-case",level:3},{value:"3.The specified value of the test coverage",id:"3the-specified-value-of-the-test-coverage",level:3},{value:"4.Project agreement",id:"4project-agreement",level:3},{value:"Integration test",id:"integration-test",level:2},{value:"Project agreement",id:"project-agreement",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"test-coverage-guide",children:"Test coverage guide"}),"\n",(0,n.jsx)(t.h2,{id:"how-to-divide-test-granularity",children:"How to divide test granularity"}),"\n",(0,n.jsx)("img",{src:"https://microservices.io/i/test-pyramid.jpeg"}),"\n",(0,n.jsxs)(t.p,{children:['How to divide test granularity is a big problem. Chris Richardson has divided unit test, integration test, component test and end-to-end test for services test in "',(0,n.jsx)(t.a,{href:"https://microservices.io/microservices/testing/2019/09/20/oracle-code-one-testing.html",children:"Descending the Testing Pyramid: Effective Testing Strategies for Microservices"}),'". We can use it for reference in the process of designing test cases.']}),"\n",(0,n.jsx)(t.h2,{id:"unit-test",children:"Unit Test"}),"\n",(0,n.jsx)(t.h3,{id:"1the-benefits-of-unit-testing",children:"1.The benefits of unit testing"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Unit test code can help everyone to go into details and understand the function of the code."}),"\n",(0,n.jsx)(t.li,{children:"We can find bugs by test case, and then enhance the robustness of the code."}),"\n",(0,n.jsx)(t.li,{children:"Test case code is also the demo usage of the core code."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"2some-design-principle-of-unit-test-case",children:"2.Some design principle of unit test case"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Steps, fine-grained and combination conditions should be well designed."}),"\n",(0,n.jsx)(t.li,{children:"Attention to boundary condition test"}),"\n",(0,n.jsx)(t.li,{children:"Test code should also be designed without writing useless code."}),"\n",(0,n.jsxs)(t.li,{children:["When you find a ",(0,n.jsx)(t.code,{children:"method"})," that is hard to write unit test, if you can be sure the ",(0,n.jsx)(t.code,{children:"method"}),' is "smelly code", then  refactor it with the committer.']}),"\n",(0,n.jsxs)(t.li,{children:["The mock framework in seata is: ",(0,n.jsx)(t.a,{href:"http://site.mockito.org/",children:"mockito"}),". Some tutorials:",(0,n.jsx)(t.a,{href:"http://www.baeldung.com/bdd-mockito",children:"mockito tutorial"}),",",(0,n.jsx)(t.a,{href:"https://dzone.com/refcardz/mockito",children:"mockito refcard"})]}),"\n",(0,n.jsx)(t.li,{children:"TDD\uff08optional\uff09\uff1aWhen you start a new issue, you can try to write test case at first"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"3the-specified-value-of-the-test-coverage",children:"3.The specified value of the test coverage"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"In the stage, the test coverage specified value of delta changed codes is \uff1a>=80%. The higher, the better."}),"\n",(0,n.jsxs)(t.li,{children:["We can see the coverage report in this page: ",(0,n.jsx)(t.a,{href:"https://codecov.io/gh/apache/incubator-seata",children:"https://codecov.io/gh/apache/incubator-seata"})]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"4project-agreement",children:"4.Project agreement"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The unit test cases of the Seata project are distributed in each sub module of the project, and the test assertion class ends with Test."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"integration-test",children:"Integration test"}),"\n",(0,n.jsx)(t.h3,{id:"project-agreement",children:"Project agreement"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Integration test in this project generally refers to the test above unit test level."}),"\n",(0,n.jsxs)(t.li,{children:["This project use ",(0,n.jsx)(t.a,{href:"https://help.github.com/en/actions/automating-your-workflow-with-github-actions",children:"github actions"}),"\u3001",(0,n.jsx)(t.a,{href:"https://github.com/GoogleContainerTools/jib",children:"jiblib maven plugin"}),"\u3001",(0,n.jsx)(t.a,{href:"https://github.com/fabric8io/fabric8-maven-plugin",children:"fabric maven plugin"}),"\u3001",(0,n.jsx)(t.a,{href:"https://github.com/testcontainers/testcontainers-java",children:"testContainers"})," to build ",(0,n.jsx)(t.a,{href:"https://www.docker.com/",children:"Docker"})," images\uff0cand build integration test environment"]}),"\n",(0,n.jsx)(t.li,{children:"Different from unit test, if a test case needs to rely on the third-party middleware, you can use the above tools to build the docker environment and test without mock. But also pay attention to the granularity of building components. For an overly complex environment, you can: the middleware on which the core test depends can be built by docker, and the middleware on which the core test depends can be mocked"}),"\n",(0,n.jsx)(t.li,{children:"The integration test cases of the Seata project are uniformly placed in the integration-test sub module, and the test assertion class ends with IT."}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://junit.org/junit5/",children:"Junit5"})," is used here"]}),"\n",(0,n.jsx)(t.li,{children:"In the process of parallel running of test cases, pay attention to the isolation state of common middleware, plan the test data and prevent conflicts."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>c});var n=i(96540);const s={},o=n.createContext(s);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);