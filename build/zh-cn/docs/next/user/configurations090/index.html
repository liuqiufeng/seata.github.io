<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-user/configurations090">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Seata 参数配置 0.9.0版本 | Seata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seata.io/seata.github.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://seata.io/seata.github.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://seata.io/seata.github.io/zh-cn/docs/next/user/configurations090"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Seata 参数配置 0.9.0版本 | Seata"><meta data-rh="true" name="description" content="Seata 参数配置 0.9.0版本。"><meta data-rh="true" property="og:description" content="Seata 参数配置 0.9.0版本。"><meta data-rh="true" name="keywords" content="Seata"><link data-rh="true" rel="icon" href="/seata.github.io/zh-cn/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="https://seata.io/seata.github.io/zh-cn/docs/next/user/configurations090"><link data-rh="true" rel="alternate" href="https://seata.io/seata.github.io/docs/next/user/configurations090" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://seata.io/seata.github.io/zh-cn/docs/next/user/configurations090" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://seata.io/seata.github.io/docs/next/user/configurations090" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ICHFIJRDZF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/seata.github.io/zh-cn/blog/rss.xml" title="Seata RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/seata.github.io/zh-cn/blog/atom.xml" title="Seata Atom Feed">


<link rel="search" type="application/opensearchdescription+xml" title="Seata" href="/seata.github.io/zh-cn/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=seata">
<script src="https://www.googletagmanager.com/gtag/js?id=G-X4LJGF90X2" async></script><link rel="stylesheet" href="/seata.github.io/zh-cn/assets/css/styles.d0073205.css">
<link rel="preload" href="/seata.github.io/zh-cn/assets/js/runtime~main.e3c607df.js" as="script">
<link rel="preload" href="/seata.github.io/zh-cn/assets/js/main.448a9560.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="https://hm.baidu.com/hm.js?104e73ef0c18b416b27abb23757ed8ee"></script>
<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/seata.github.io/zh-cn/"><div class="navbar__logo"><img src="/seata.github.io/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/seata.github.io/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/">首页</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/overview/what-is-seata" href="/seata.github.io/zh-cn/docs/next/overview/what-is-seata">预览版</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/seata.github.io/zh-cn/docs/next/user/configurations090">预览版</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/user/configurations090">v2.0</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.8/user/configurations090">v1.8</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.7/user/configurations090">v1.7</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.6/user/configurations090">v1.6</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.5/user/configurations090">v1.5</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.4/user/configurations090">v1.4</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.3/user/configurations090">v1.3</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.2/user/configurations090">v1.2</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.1/user/configurations090">v1.1</a></li><li><a class="dropdown__link" href="/seata.github.io/zh-cn/docs/v1.0/user/configurations090">v1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/docs/next/developers/contributor-guide/new-contributor-guide_dev">开发者</a><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/blog">博客</a><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/users">用户</a><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/community">社区</a><a class="navbar__item navbar__link" href="/seata.github.io/zh-cn/unversioned/download/seata-server">下载</a><a href="http://demo.seata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">控制台样例</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中</a><ul class="dropdown__menu"><li><a href="/seata.github.io/docs/next/user/configurations090" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">En</a></li><li><a href="/seata.github.io/zh-cn/docs/next/user/configurations090" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Seata<!-- --> <b>预览版</b> 版尚未发行的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/seata.github.io/zh-cn/docs/user/configurations090">最新版本</a></b> (<!-- -->v2.0<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">版本：预览版</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>seata参数配置 0.9.0版本</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="公共部分">公共部分<a href="#公共部分" class="hash-link" aria-label="公共部分的直接链接" title="公共部分的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>transport.serialization</td><td>client和server通信编解码方式</td><td>seata、protobuf</td></tr><tr><td>transport.heartbeat</td><td>client和server通信心跳检测开关</td><td>默认true开启</td></tr><tr><td>registry.type</td><td>注册中心类型</td><td>默认file，支持file 、nacos 、redis、eureka、zk、consul、etcd3、sofa、custom</td></tr><tr><td>config.type</td><td>配置中心类型</td><td>默认file，支持file、nacos 、apollo、zk、consul、etcd3、springcloud、custom</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="server端">server端<a href="#server端" class="hash-link" aria-label="server端的直接链接" title="server端的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>transaction.undo.log.save.days</td><td>undo保留天数</td><td>默认7天,log_status=1（附录3）和未正常清理的undo</td></tr><tr><td>transaction.undo.log.delete.period</td><td>undo清理线程间隔时间</td><td>默认86400000，单位毫秒</td></tr><tr><td>service.max.commit.retry.timeout</td><td>二阶段提交重试超时时长</td><td>单位ms,s,m,h,d,对应毫秒,秒,分,小时,天,默认毫秒。默认值-1表示无限重试。公式: timeout&gt;=now-globalTransactionBeginTime,true表示超时则不再重试</td></tr><tr><td>service.max.rollback.retry.timeout</td><td>二阶段回滚重试超时时长</td><td>同commit</td></tr><tr><td>recovery.committing-retry-period</td><td>二阶段提交未完成状态全局事务重试提交线程间隔时间</td><td>默认1000，单位毫秒</td></tr><tr><td>recovery.asyn-committing-retry-period</td><td>二阶段异步提交状态重试提交线程间隔时间</td><td>默认1000，单位毫秒</td></tr><tr><td>recovery.rollbacking-retry-period</td><td>二阶段回滚状态重试回滚线程间隔时间</td><td>默认1000，单位毫秒</td></tr><tr><td>recovery.timeout-retry-period</td><td>超时状态检测重试线程间隔时间</td><td>默认1000，单位毫秒，检测出超时将全局事务置入回滚会话管理器</td></tr><tr><td>store.mode</td><td>事务会话信息存储方式</td><td>file本地文件(不支持HA)，db数据库(支持HA)</td></tr><tr><td>store.file.dir</td><td>file模式文件存储文件夹名</td><td>默认sessionStore</td></tr><tr><td>store.file.maxBranchSessionSize</td><td>file模式文件存储分支session最大字节数</td><td>默认16384(16kb),单位byte</td></tr><tr><td>store.file.maxGlobalSessionSize</td><td>file模式文件存储全局session最大字节数</td><td>默认512b，单位byte</td></tr><tr><td>store.file.fileWriteBufferCacheSize</td><td>file模式文件存储buffer最大缓存大小</td><td>默认16384(16kb)，单位byte,写入session等数据量大于该值时会抛出异常</td></tr><tr><td>store.file.flushDiskMode</td><td>file模式文件存储刷盘策略</td><td>默认async，可选sync</td></tr><tr><td>store.file.sessionReloadReadSize</td><td>file模式文件存储Server节点重启后从备份文件中恢复的session或lock key上限个数</td><td>默认100</td></tr><tr><td>store.db.datasource</td><td>db模式数据源类型</td><td>默认dbcp</td></tr><tr><td>store.db.db-type</td><td>db模式数据库类型</td><td>默认mysql</td></tr><tr><td>store.db.driver-class-name</td><td>db模式数据库驱动</td><td>默认com.mysql.jdbc.Driver</td></tr><tr><td>store.db.url</td><td>db模式数据源库url</td><td>默认jdbc:mysql://127.0.0.1:3306/seata</td></tr><tr><td>store.db.user</td><td>db模式数据库账户</td><td>默认mysql</td></tr><tr><td>store.db.min-conn</td><td>db模式数据库初始连接数</td><td>默认1</td></tr><tr><td>store.db.max-conn</td><td>db模式数据库最大连接数</td><td>默认3</td></tr><tr><td>store.db.global.table</td><td>db模式全局事务表名</td><td>默认global_table</td></tr><tr><td>store.db.branch.table</td><td>db模式分支事务表名</td><td>默认branch_table</td></tr><tr><td>store.db.lock-table</td><td>db模式全局锁表名</td><td>默认lock_table</td></tr><tr><td>store.db.query-limit</td><td>db模式查询全局事务一次的最大条数</td><td>默认1000</td></tr><tr><td>metrics.enabled</td><td>是否启用Metrics</td><td>默认false关闭，在False状态下，所有与Metrics相关的组件将不会被初始化，使得性能损耗最低</td></tr><tr><td>metrics.registry-type</td><td>指标注册器类型</td><td>Metrics使用的指标注册器类型，默认为内置的compact（简易）实现，这个实现中的Meter仅使用有限内存计数，性能高足够满足大多数场景；目前只能设置一个指标注册器实现</td></tr><tr><td>metrics.exporter-list</td><td>指标结果Measurement数据输出器列表</td><td>默认prometheus，多个输出器使用英文逗号分割，例如&quot;prometheus,jmx&quot;，目前仅实现了对接prometheus的输出器</td></tr><tr><td>metrics.exporter-prometheus-port</td><td>prometheus输出器Client端口号</td><td>默认9898</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client端">client端<a href="#client端" class="hash-link" aria-label="client端的直接链接" title="client端的直接链接">​</a></h3><table><thead><tr><th>key</th><th>role</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>service.vgroup_mapping.my_test_tx_group</td><td>TM,RM</td><td>事务群组（附录1）</td><td>my_test_tx_group为分组，配置项值为TC集群名</td></tr><tr><td>service.default.grouplist</td><td>TM,RM</td><td>TC服务列表（附录2）</td><td>仅注册中心为file时使用</td></tr><tr><td>service.disableGlobalTransaction</td><td>TM,RM</td><td>全局事务开关</td><td>默认false。false为开启，true为关闭</td></tr><tr><td>service.enableDegrade</td><td>TM</td><td>降级开关（待实现）</td><td>默认false。业务侧根据连续错误数自动降级不走seata事务</td></tr><tr><td>client.async.commit.buffer.limit</td><td>RM</td><td>异步提交缓存队列长度</td><td>默认10000。 二阶段提交成功，RM异步清理undo队列</td></tr><tr><td>client.lock.retry.internal</td><td>RM</td><td>校验或占用全局锁重试间隔</td><td>默认10，单位毫秒</td></tr><tr><td>client.lock.retry.times</td><td>RM</td><td>校验或占用全局锁重试次数</td><td>默认30</td></tr><tr><td>client.lock.retry.policy.branch-rollback-on-conflict</td><td>RM</td><td>分支事务与其它全局回滚事务冲突时锁策略</td><td>默认true，优先释放本地锁让回滚成功</td></tr><tr><td>client.report.retry.count</td><td>TM,RM</td><td>一阶段结果上报TC重试次数</td><td>默认5次</td></tr><tr><td>client.tm.commit.retry.count</td><td>TM</td><td>一阶段全局提交结果上报TC重试次数</td><td>默认1次，建议大于1</td></tr><tr><td>client.tm.rollback.retry.count</td><td>TM</td><td>一阶段全局回滚结果上报TC重试次数</td><td>默认1次，建议大于1</td></tr><tr><td>client.table.meta.check.enable</td><td>RM</td><td>自动刷新缓存中的表结构</td><td>默认true</td></tr><tr><td>transaction.undo.data.validation</td><td>RM</td><td>二阶段回滚镜像校验</td><td>默认true开启，false关闭</td></tr><tr><td>transaction.undo.log.serialization</td><td>RM</td><td>undo序列化方式</td><td>默认jackson</td></tr><tr><td>transaction.undo.log.table</td><td>RM</td><td>自定义undo表名</td><td>默认undo_log</td></tr><tr><td>support.spring.datasource.autoproxy</td><td>RM</td><td>数据源自动代理开关</td><td>默认false关闭</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="未使用">未使用<a href="#未使用" class="hash-link" aria-label="未使用的直接链接" title="未使用的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>lock.mode</td><td>锁存储方式</td><td>local、remote</td></tr><tr><td>lock.local</td><td></td><td></td></tr><tr><td>lock.remote</td><td></td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录1">附录1：<a href="#附录1" class="hash-link" aria-label="附录1：的直接链接" title="附录1：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">事务分组说明。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.事务分组是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">事务分组是seata的资源逻辑，类似于服务实例。在file.conf中的my_test_tx_group就是一个事务分组。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.通过事务分组如何找到后端集群？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首先程序中配置了事务分组（GlobalTransactionScanner 构造方法的txServiceGroup参数），程序会通过用户配置的配置中心去寻找service.vgroup_mapping.事务分组配置项，取得配置项的值就是TC集群的名称。拿到集群名称程序通过一定的前后缀+集群名称去构造服务名，各配置中心的服务名实现不同。拿到服务名去相应的注册中心去拉取相应服务名的服务列表，获得后端真实的TC服务列表。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.为什么这么设计，不直接取服务名？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">这里多了一层获取事务分组到映射集群的配置。这样设计后，事务分组可以作为资源的逻辑隔离单位，当发生故障时可以快速failover。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录2">附录2：<a href="#附录2" class="hash-link" aria-label="附录2：的直接链接" title="附录2：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">关于grouplist问题说明下。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 什么时候会用到file.conf中的default.grouplist？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">当registry.type=file时会用到，其他时候不读。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. default.grouplist的值列表是否可以配置多个？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">可以配置多个，配置多个意味着集群，但当store.mode=file时，会报错。原因是在file存储模式下未提供本地文件的同步，所以需要使用store.mode=db，通过db来共享TC集群间数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 是否推荐使用default.grouplist？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">不推荐，如问题1，当registry.type=file时会用到，也就是说这里用的不是真正的注册中心，不具体服务的健康检查机制当tc不可用时无法自动剔除列表，推荐使用nacos 、eureka、redis、zk、consul、etcd3、sofa。registry.type=file或config.type=file 设计的初衷是让用户再不依赖第三方注册中心或配置中心的前提下，通过直连的方式，快速验证seata服务。    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录3">附录3：<a href="#附录3" class="hash-link" aria-label="附录3：的直接链接" title="附录3：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">log_status=1的是防御性的，是收到全局回滚请求，但是不确定某个事务分支的本地事务是否已经执行完成了，这时事先插入一条branchid相同的数据，插入的假数据成功了，本地事务继续执行就会报主键冲突自动回滚。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">假如插入不成功说明表里有数据这个本地事务已经执行完成了，那么取出这条undolog数据做反向回滚操作。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/zh-cn/docusaurus-plugin-content-docs/current/user/configurations090.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#公共部分" class="table-of-contents__link toc-highlight">公共部分</a></li><li><a href="#server端" class="table-of-contents__link toc-highlight">server端</a></li><li><a href="#client端" class="table-of-contents__link toc-highlight">client端</a></li><li><a href="#未使用" class="table-of-contents__link toc-highlight">未使用</a></li><li><a href="#附录1" class="table-of-contents__link toc-highlight">附录1：</a></li><li><a href="#附录2" class="table-of-contents__link toc-highlight">附录2：</a></li><li><a href="#附录3" class="table-of-contents__link toc-highlight">附录3：</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/seata.github.io/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/seata.github.io/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">
                  <div class="fs-12">
                    <div class="center-div">
                      <span>Apache Seata is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span>
                    </div>
                    <br>
                    <div class="center-div">
                      <span>Copyright © 2023-2024, The Apache Software Foundation Apache Seata, Seata, Apache, Apache Incubator, the Apache feather, the Apache Incubator logo and the Apache Seata project logo are either registered trademarks or trademarks of the Apache Software Foundation.</span>
                      <br>
                    </div>
                    <br>
                  </div>
                  </div></div></div></footer></div>
<script src="/seata.github.io/zh-cn/assets/js/runtime~main.e3c607df.js"></script>
<script src="/seata.github.io/zh-cn/assets/js/main.448a9560.js"></script>
</body>
</html>